<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Музыкальный профиль</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Playfair+Display:wght@700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/website/styles/profile.css" />
  </head>
  <body>
    <div class="app">
      <!-- Страница музыки -->
      <div id="musicPage" class="page active">
        <header class="profile-hero">
          <div class="profile-bg"></div>
          <div class="profile-content">
            <div class="profile-avatar" id="avatarWrapper">
              <img
                id="userAvatar"
                src="https://i.imgur.com/8Km9tLL.png"
                alt="Avatar"
              />
              <div class="avatar-ring"></div>
              <input type="file" id="avatarInput" accept="image/*" hidden />
            </div>
            <div class="profile-info">
              <span class="profile-label">Профиль</span>
              <h1 id="userName">Загрузка...</h1>
              <div class="profile-stats">
                <span id="songCount">0 песен</span>
                <span class="divider">•</span>
                <span id="memberSince">Участник с 2024</span>
              </div>
            </div>
          </div>
        </header>

        <section class="controls">
          <button id="playAllBtn" class="btn-play-all" disabled>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5v14l11-7z" />
            </svg>
            Играть всё
          </button>
        </section>

        <section class="playlist-section">
          <div class="section-header">
            <h2>Моя музыка</h2>
            <div class="view-toggle">
              <button class="view-btn active" data-view="list">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="8" y1="6" x2="21" y2="6"></line>
                  <line x1="8" y1="12" x2="21" y2="12"></line>
                  <line x1="8" y1="18" x2="21" y2="18"></line>
                  <line x1="3" y1="6" x2="3.01" y2="6"></line>
                  <line x1="3" y1="12" x2="3.01" y2="12"></line>
                  <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
              </button>
              <button class="view-btn" data-view="grid">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="3" y="3" width="7" height="7"></rect>
                  <rect x="14" y="3" width="7" height="7"></rect>
                  <rect x="14" y="14" width="7" height="7"></rect>
                  <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
              </button>
            </div>
          </div>

          <div id="emptyState" class="empty-state">
            <svg
              width="80"
              height="80"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polygon points="10 8 16 12 10 16 10 8"></polygon>
            </svg>
            <h3>У пользователя нет песен :)</h3>
          </div>

          <div id="loadingState" class="loading-state hidden">
            <div class="loader"></div>
            <span>Загрузка песен...</span>
          </div>

          <ul id="songList" class="song-list list-view"></ul>

          <button id="loadMoreBtn" class="btn-load-more hidden">
            Показать больше
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
        </section>
      </div>

      <!-- Страница плеера (для мобильных) -->
      <div id="playerPage" class="page">
        <section class="fullscreen-player">
          <button class="player-close-btn" id="closePlayerPage">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="19 12 12 5 5 12"></polyline>
            </svg>
          </button>

          <div class="fullscreen-artwork">
            <img id="fullscreenArtwork" src="" alt="Album Art" />
          </div>

          <div class="fullscreen-info">
            <h2 id="fullscreenTitle">Название песни</h2>
            <p id="fullscreenArtist">Артист</p>
          </div>

          <div class="fullscreen-progress">
            <div class="progress-bar-large">
              <div id="progressFillLarge" class="progress-fill"></div>
            </div>
            <div class="progress-times">
              <span id="currentTimeLarge">0:00</span>
              <span id="durationLarge">0:00</span>
            </div>
          </div>

          <div class="fullscreen-controls">
            <button
              id="shuffleBtnLarge"
              class="player-btn-control"
              title="Перемешать"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="16 3 21 3 21 8"></polyline>
                <line x1="4" y1="20" x2="21" y2="3"></line>
                <polyline points="21 16 21 21 16 21"></polyline>
                <line x1="15" y1="15" x2="21" y2="21"></line>
                <line x1="4" y1="4" x2="9" y2="9"></line>
              </svg>
            </button>
            <button class="fullscreen-btn" id="prevBtnLarge">
              <svg
                width="28"
                height="28"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M6 4h2v16H6zm12 0l-10 8 10 8z" />
              </svg>
            </button>
            <button class="fullscreen-btn-play" id="fullscreenPlayBtn">
              <svg
                width="40"
                height="40"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M8 5v14l11-7z" />
              </svg>
            </button>
            <button class="fullscreen-btn" id="nextBtnLarge">
              <svg
                width="28"
                height="28"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M16 4h2v16h-2zM6 4l10 8-10 8z" />
              </svg>
            </button>
            <button id="repeatBtn" class="player-btn-control" title="Повтор">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="17 1 21 5 17 9"></polyline>
                <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
                <polyline points="7 23 3 19 7 15"></polyline>
                <path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
              </svg>
            </button>
          </div>

          <div class="fullscreen-volume">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            </svg>
            <input
              type="range"
              id="volumeSliderLarge"
              min="0"
              max="100"
              value="70"
              class="volume-slider-large"
            />
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
              <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
              <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
          </div>
        </section>
      </div>

      <!-- Desktop Mini Player -->
      <div id="miniPlayer" class="mini-player hidden">
        <div class="player-left">
          <img id="playerArtwork" src="" alt="" />
          <div class="player-text">
            <div id="playerTitle">Название</div>
            <div id="playerArtist">Артист</div>
          </div>
        </div>

        <div class="player-center">
          <div class="player-progress-section">
            <span id="currentTime" class="time-label">0:00</span>
            <div class="progress-bar-wrapper">
              <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
                <div id="progressHandle" class="progress-handle"></div>
              </div>
            </div>
            <span id="duration" class="time-label">0:00</span>
          </div>

          <div class="player-controls">
            <button
              id="shuffleBtn"
              class="player-btn-control"
              title="Перемешать"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="16 3 21 3 21 8"></polyline>
                <line x1="4" y1="20" x2="21" y2="3"></line>
                <polyline points="21 16 21 21 16 21"></polyline>
                <line x1="15" y1="15" x2="21" y2="21"></line>
                <line x1="4" y1="4" x2="9" y2="9"></line>
              </svg>
            </button>
            <button id="prevBtn" class="player-btn-control">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M6 4h2v16H6V4zm12 0v16l-10-8 10-8z" />
              </svg>
            </button>
            <button id="playerPlayBtn" class="player-btn-play">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M8 5v14l11-7z" />
              </svg>
            </button>
            <button id="nextBtn" class="player-btn-control">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M16 4h2v16h-2V4zM6 4l10 8-10 8V4z" />
              </svg>
            </button>
            <button id="repeatBtn" class="player-btn-control" title="Повтор">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="17 1 21 5 17 9"></polyline>
                <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
                <polyline points="7 23 3 19 7 15"></polyline>
                <path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
              </svg>
            </button>
          </div>
        </div>

        <div class="player-right">
          <button id="volumeBtn" class="player-btn-volume">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M11 5L6 9H2v6h4l5 4V5z"></path>
              <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
          </button>
          <div class="volume-slider-wrapper">
            <input
              type="range"
              id="volumeSlider"
              min="0"
              max="100"
              value="70"
              class="volume-slider"
            />
          </div>
        </div>
      </div>

      <!-- Bottom Navigation (Mobile) -->
      <nav id="bottomNav" class="bottom-nav">
        <button class="nav-item active" data-page="music">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <polygon points="10 8 16 12 10 16 10 8"></polygon>
          </svg>
          <span>Музыка</span>
        </button>

        <button
          class="nav-item nav-player"
          data-page="player"
          id="navPlayerBtn"
        >
          <div class="nav-player-btn">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5v14l11-7z" />
            </svg>
          </div>
        </button>
      </nav>

      <!-- Desktop Navigation -->
      <aside id="desktopNav" class="desktop-nav">
        <div class="nav-logo">
          <div class="logo-icon">
            <svg
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polygon points="10 8 16 12 10 16 10 8"></polygon>
            </svg>
          </div>
          <span class="logo-text">Music</span>
        </div>

        <nav class="nav-menu">
          <button class="nav-item active" data-page="music">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
              <path
                d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"
              ></path>
            </svg>
            <span>Моя музыка</span>
          </button>
        </nav>

        <div class="nav-footer">
          <div class="nav-divider"></div>
          <button class="nav-user">
            <img
              src="https://i.imgur.com/8Km9tLL.png"
              alt="User"
              class="nav-user-avatar"
            />
            <div class="nav-user-info">
              <span class="nav-user-name" id="navUserName">Пользователь</span>
            </div>
          </button>
        </div>
      </aside>

      <audio id="player"></audio>
    </div>

    <div id="toastContainer" class="toast-container"></div>

    <script src="/website/script/friendsProfile.js"></script>
    <script src="/website/script/friends.js"></script>
  </body>
</html>
